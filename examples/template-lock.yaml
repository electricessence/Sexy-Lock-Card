# Template Lock with Transitional States
# Add this to your configuration.yaml to create a lock
# that provides locking/unlocking states

# Helper to track transition state
input_text:
  front_door_lock_state:
    name: Front Door Lock State
    initial: "unknown"

# Template lock wrapper
template:
  - lock:
      - name: "Smart Front Door Lock"
        unique_id: smart_front_door_lock
        
        # Current state based on helper or base lock
        value_template: >-
          {% if states('input_text.front_door_lock_state') in ['locking', 'unlocking'] %}
            {{ states('input_text.front_door_lock_state') }}
          {% else %}
            {{ states('lock.front_door_base') }}
          {% endif %}
        
        # Lock action with transition state
        lock:
          - service: input_text.set_value
            target:
              entity_id: input_text.front_door_lock_state
            data:
              value: "locking"
          - delay: "00:00:00.2"
          - service: lock.lock
            target:
              entity_id: lock.front_door_base
          - delay: "00:00:01"
          - service: input_text.set_value
            target:
              entity_id: input_text.front_door_lock_state
            data:
              value: "{{ states('lock.front_door_base') }}"
        
        # Unlock action with transition state
        unlock:
          - service: input_text.set_value
            target:
              entity_id: input_text.front_door_lock_state
            data:
              value: "unlocking"
          - delay: "00:00:00.2"
          - service: lock.unlock
            target:
              entity_id: lock.front_door_base
          - delay: "00:00:01"
          - service: input_text.set_value
            target:
              entity_id: input_text.front_door_lock_state
            data:
              value: "{{ states('lock.front_door_base') }}"

# Lovelace card configuration
# type: custom:sexy-lock-card
# entity: lock.smart_front_door_lock  # Use the template lock
